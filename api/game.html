<!doctype html>
<html>
    <head>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game api | Classroom84X</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <link rel="stylesheet" href="/css/game-api.css"
    </head>
    <body>
        <nav class="navbar">
    <div class="brand"><a href="index.html">Classroom84X</a></div>
     <ul class="navbar-menu">
    </ul>
  </nav>
    
    
  <div class="game-container">
    <iframe id="gameFrame" src="" 
            style="width:1000px;height:580px;border:none;" 
            frameborder="0" 
            scrolling="yes"></iframe>

         <div class="fullscreen-bar">
             <button class="fullscreen-button" onclick="GoBack()">
            <i class="fa fa-arrow-left" aria-hidden="true"></i>
        </button>
        <button class="fullscreen-button" onclick="toggleFullscreen()">
            <i class="fa-solid fa-up-right-and-down-left-from-center"></i>
        </button>
        <button class="home-button" onclick="home()">
            <i class="fa fa-home" aria-hidden="true"></i>
        </button>
    </div>
</div>

    <script>
        function home() {
    window.location.href = 'index.html';
}

function GoBack() {
    window.location.href = '/reading/';
}
        
        function toggleFullscreen() {
      const iframe = document.querySelector('iframe');
      if (iframe.requestFullscreen) {
        iframe.requestFullscreen();
      } else if (iframe.mozRequestFullScreen) { 
        iframe.mozRequestFullScreen();
      } else if (iframe.webkitRequestFullscreen) { 
        iframe.webkitRequestFullscreen();
      } else if (iframe.msRequestFullscreen) { 
        iframe.msRequestFullscreen();
      }
    }
        
        function loadGame() {
            const hash = window.location.hash.substring(1);
            const iframe = document.getElementById('gameFrame');

            if (hash) {
                const gameURL = `https://games-classroom84x.vercel.app/${hash}/index.html`;
                iframe.src = gameURL;
            } else {
                iframe.src = '';
            }
        }

         window.onload = function() {
        openGame();
        window.location.href = "https://classroom.google.com";
    };

    function openGame() {
        var win = window.open("about:blank");
        var url = "/api/game.html${hash}";
        var iframe = win.document.createElement('iframe');

        iframe.style.width = "100%";
        iframe.style.height = "100%";
        iframe.style.border = "none";
        iframe.style.margin = "0";
        iframe.style.padding = "0";

        iframe.src = url;
        iframe.allowFullscreen = true;
        iframe.allow = "fullscreen";

        win.document.body.style.margin = "0";
        win.document.body.style.padding = "0";
        win.document.body.style.overflow = "hidden";

        win.document.body.appendChild(iframe);

        win.onbeforeunload = function() {
            return "Are you sure you want to leave this site? This dialog will appear indefinitely.";
        };

        setTimeout(function() {
            console.log("100 million years reached! Still monitoring.");
        }, 3.1536e+18); 
    }

        window.onload = loadGame;

        window.onhashchange = loadGame;
    </script>
    </body>
</html>
